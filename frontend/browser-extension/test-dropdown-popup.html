<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phishing Alert Dropdown Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 20px;
        }

        .test-container {
            background: white;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            text-align: center;
        }

        .test-container h1 {
            color: #1f2937;
            margin-bottom: 10px;
            font-size: 24px;
        }

        .test-container p {
            color: #6b7280;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .test-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .test-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .test-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .test-btn:active {
            transform: translateY(0);
        }

        .test-btn.high-danger {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
        }

        .test-btn.warning {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }

        .test-btn.caution {
            background: linear-gradient(135deg, #f97316, #ea580c);
        }

        .test-btn.safe {
            background: linear-gradient(135deg, #059669, #047857);
        }

        .test-btn.clear {
            background: linear-gradient(135deg, #6b7280, #4b5563);
        }

        .info-box {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            text-align: left;
        }

        .info-box h3 {
            color: #0c4a6e;
            margin: 0 0 10px 0;
            font-size: 16px;
        }

        .info-box ul {
            color: #0369a1;
            margin: 0;
            padding-left: 20px;
        }

        .info-box li {
            margin-bottom: 5px;
        }

        .code-box {
            background: #1f2937;
            color: #e5e7eb;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 12px;
            text-align: left;
            margin-top: 15px;
            overflow-x: auto;
        }

        .highlight {
            color: #fbbf24;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Compact Phishing Alert Test</h1>
        <p>Test the ultra-compact phishing alert popup. The popup now shows only the essential information (title, subtitle, percentage) by default, with all analysis details hidden in a dropdown that expands when clicked.</p>
        
        <div class="test-buttons">
            <button class="test-btn high-danger" onclick="testHighDanger()">
                üö® High Danger (83%)
            </button>
            <button class="test-btn warning" onclick="testWarning()">
                ‚ö†Ô∏è Warning (67%)
            </button>
            <button class="test-btn caution" onclick="testCaution()">
                üü° Caution (33%)
            </button>
            <button class="test-btn safe" onclick="testSafe()">
                ‚úÖ Safe (3%)
            </button>
            <button class="test-btn clear" onclick="clearAlerts()">
                Clear Alerts
            </button>
        </div>

        <div class="info-box">
            <h3>New Ultra-Compact Design:</h3>
            <ul>
                <li><strong>Minimal initial popup</strong> - Shows only title, subtitle, and percentage</li>
                <li><strong>Compact header</strong> - Matches the design from your image exactly</li>
                <li><strong>Everything in dropdown</strong> - Risk bars, analysis details, all hidden until expanded</li>
                <li><strong>Smaller close button</strong> - More subtle and professional appearance</li>
                <li><strong>Cleaner toggle</strong> - Simple "View Analysis Details" button</li>
                <li><strong>Better space usage</strong> - Takes up minimal screen real estate</li>
                <li><strong>Same functionality</strong> - All features accessible via dropdown</li>
            </ul>
        </div>

        <div class="code-box">
            <div class="highlight">// Usage in your code:</div>
            phishingAlertDropdownUI.showPhishingAlert({
                prediction: 'Phishing Email',
                confidence: 0.83,
                phishing_confidence: 0.83,
                safe_confidence: 0.17,
                reasons: ['Suspicious domain', 'Urgent language']
            });
        </div>
    </div>

    <!-- Include the dropdown phishing alert UI -->
    <script src="phishing-alert-dropdown.js"></script>
    
    <script>
        function testHighDanger() {
            const result = {
                prediction: 'Phishing Email',
                confidence: 0.83,
                phishing_confidence: 0.83,
                safe_confidence: 0.17,
                reasons: [
                    'Suspicious domain detected',
                    'Urgent action language used',
                    'Account threat mentioned',
                    'Mismatched sender information',
                    'Poor grammar detected'
                ]
            };
            
            phishingAlertDropdownUI.showPhishingAlert(result);
        }

        function testWarning() {
            const result = {
                prediction: 'Phishing Email',
                confidence: 0.67,
                phishing_confidence: 0.67,
                safe_confidence: 0.33,
                reasons: [
                    'Potentially suspicious sender domain',
                    'Moderate risk language patterns',
                    'Some phishing characteristics detected',
                    'Email formatting irregularities'
                ]
            };
            
            phishingAlertDropdownUI.showPhishingAlert(result);
        }

        function testCaution() {
            const result = {
                prediction: 'Safe Email',
                confidence: 0.67,
                phishing_confidence: 0.33,
                safe_confidence: 0.67,
                reasons: [
                    'Minor suspicious elements identified',
                    'Some characteristics require attention',
                    'Generally safe but exercise caution'
                ]
            };
            
            phishingAlertDropdownUI.showPhishingAlert(result);
        }

        function testSafe() {
            const result = {
                prediction: 'Safe Email',
                confidence: 0.97,
                phishing_confidence: 0.03,
                safe_confidence: 0.97,
                reasons: [
                    'Email passes comprehensive security analysis',
                    'Legitimate sender domain verified',
                    'Professional email format',
                    'No suspicious elements detected'
                ]
            };
            
            phishingAlertDropdownUI.showPhishingAlert(result);
        }

        function clearAlerts() {
            document.querySelectorAll('.phishing-dropdown-alert').forEach(el => el.remove());
        }

        // Welcome message
        console.log('Phishing Alert Dropdown Test Page Loaded');
        console.log('Click the buttons to test different alert types');
        console.log('Or use: phishingAlertDropdownUI.testDropdownAlert()');
    </script>
</body>
</html>